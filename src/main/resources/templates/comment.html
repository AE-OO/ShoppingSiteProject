<!--
  th:replace 작성하기
  뷰 꾸미기 show랑 비슷하게 - 완
  댓글 등록, 수정, 삭제는 ajax로 구현하기 - 완
  몇번째 상품의 댓글인지 bid 받아오기 - 완
  js파일 따로 두기 - 완
-->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- 부트스트랩 CSS CDN -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <!-- JQUERY CDN -->
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <!-- AJAX CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <!-- 내가 작성한 JS파일 -->
    <script type="text/javascript" src="/js/commentJS.js"></script>
</head>
<body>
<section class="py-5 bg-light">
    <!-- 댓글 작성 부분 구현 -->
    <div class="container px-4 px-lg-5 mt-5">
        <h2 class="fw-bolder mb-4" style="color: rgb(101, 100, 100);">댓글</h2>
        <br/>
        <form>
            <div class="container" style="height: 50px;">
                <div class="input-group mb-3" style="width: 50%; float: left;">
                    <span class="input-group-text" id="inputGroup-sizing-default">작성자</span>
                    <input type="text" class="form-control" aria-label="Sizing example input"
                           aria-describedby="inputGroup-sizing-default" id="input--Writer" name="cWriter">
                </div>
                <div class="input-group mb-3" style="width: 50%; float: left;">
                    <span class="input-group-text" id="inputGroup-sizing-default">비밀번호</span>
                    <input type="password" class="form-control" aria-label="Sizing example input"
                           aria-describedby="inputGroup-sizing-default" id="input--Pw" name="cPw">
                </div>
            </div>
            <div class="container">
                <div class="form-floating">
                    <textarea class="form-control" placeholder="Leave a comment here" id="input--Content"
                              name="cContent" onkeyup="textCounter(this, 100)" style="height: 100px; resize: none;"></textarea>
                    <label for="input--Content">Comments</label>
                </div>
                <span id="countText" style="text-align: right;">0 / 100자</span>
                <span class="d-flex">
                    <button class="btn btn-outline-dark flex-shrink-0" id="Btn--uploadComment"
                            style="margin: 20px 10px 0px 0px; float: left;" type="button">
                        댓글 등록
                    </button>
                </span>
            </div>
            <input type="hidden" id="input--Bid" th:value="${bId}"/>
        </form>
    </div>

    <br/>
    <hr/>
    <br/>

    <!-- 댓글 리스트 구현부분 -->
    <div class="container">
        <div th:each="comments : ${comments}">
            <div th:id="${comments.cId}">
                <div class="card">
                    <div class="card-header">
                        <b style="float: left;">[[${comments.cWriter}]]</b>
                        <div style="color: rgb(136, 134, 134); float: right;">&nbsp;<i>[[${comments.cDate}]]</i></div>
                    </div>
                    <div class="card-body">
                        <p class="card-text">[[${comments.cContent}]]</p>
                        <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                            <input type="hidden" th:value="${comments.cId}" id="comment--cId">
                            <button class="btn btn-outline-secondary btn-sm Btn--updateComment" th:id="${comments.cId}"
                                    th:writer="${comments.cWriter}" th:content="${comments.cContent}"
                                    th:date="${comments.cDate}"
                                    th:onclick="commentUpdateForm(this.getAttribute('id'), this.getAttribute('writer'), this.getAttribute('content'), this.getAttribute('date'))"
                                    type="button">댓글수정
                            </button>
                            <button class="btn btn-outline-secondary btn-sm Btn--deleteComment" th:id="${comments.cId}"
                                    th:onclick="deleteComment(this.getAttribute('id'))"
                                    type="button">댓글삭제
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            <br/>
        </div>
    </div>
    </div>
</section>
</body>
<!-- 부트스트랩 JS CDN -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
</html>